<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS TOOLS // v3.0</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.1/dist/browser-image-compression.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cyber: {
                            black: '#0a0a0a',
                            dark: '#111111',
                            panel: '#1a1a1a',
                            cyan: '#00f3ff',
                            purple: '#bc13fe',
                            green: '#0aff0a'
                        }
                    },
                    fontFamily: {
                        mono: ['"JetBrains Mono"', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #050505;
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            color: #e0e0e0;
        }
        
        /* Glass Panel Effect */
        .glass-panel {
            background: rgba(20, 20, 20, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 243, 255, 0.1);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }
        .glass-panel:hover {
            border-color: rgba(0, 243, 255, 0.4);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.1);
        }

        /* Neon Buttons */
        .btn-neon {
            background: transparent;
            border: 1px solid #00f3ff;
            color: #00f3ff;
            text-shadow: 0 0 5px rgba(0, 243, 255, 0.5);
            transition: all 0.3s ease;
        }
        .btn-neon:hover {
            background: #00f3ff;
            color: #000;
            box-shadow: 0 0 20px #00f3ff;
        }

        /* Inputs */
        .input-cyber {
            background: #0a0a0a;
            border: 1px solid #333;
            color: #00f3ff;
        }
        .input-cyber:focus {
            outline: none;
            border-color: #bc13fe;
            box-shadow: 0 0 10px rgba(188, 19, 254, 0.3);
        }

        /* Loader Animation */
        .cyber-loader {
            border: 3px solid #111;
            border-top: 3px solid #00f3ff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="font-mono min-h-screen pb-20">

    <nav class="border-b border-gray-800 bg-cyber-black/90 sticky top-0 z-50 backdrop-blur-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="w-3 h-3 bg-cyber-cyan rounded-full animate-pulse"></div>
                <h1 class="text-2xl font-bold tracking-tighter text-white">
                    NEXUS<span class="text-cyber-cyan">TOOLS</span>
                </h1>
            </div>
            <div class="flex items-center gap-4 text-xs text-gray-400">
                <span class="hidden md:block">STATUS: <span class="text-cyber-green">ONLINE</span></span>
                <span class="border border-cyber-purple text-cyber-purple px-2 py-1 rounded">V3.0 LOCAL</span>
            </div>
        </div>
    </nav>

    <div class="container mx-auto mt-12 px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

        <div class="glass-panel p-6 rounded-none relative overflow-hidden group">
            <div class="absolute top-0 left-0 w-1 h-full bg-cyber-cyan opacity-50 group-hover:opacity-100 transition"></div>
            <h2 class="text-xl font-bold mb-1 text-white flex items-center gap-2">
                <span class="text-cyber-cyan">></span> OCR SCANNER
            </h2>
            <p class="text-xs text-gray-500 mb-6 font-bold tracking-widest">IMAGE_TO_TEXT_PROTOCOL</p>
            
            <div class="space-y-4">
                <select id="ocrLang" class="input-cyber w-full p-2 text-sm rounded-none">
                    <option value="eng">LANG: ENGLISH</option>
                    <option value="hin">LANG: HINDI (DEVNAGARI)</option>
                </select>

                <input type="file" id="ocrInput" accept="image/*" class="block w-full text-xs text-gray-400
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-none file:border-0
                  file:text-xs file:font-bold
                  file:bg-cyber-dark file:text-cyber-cyan
                  file:border file:border-cyber-cyan
                  hover:file:bg-cyber-cyan hover:file:text-black cursor-pointer" />

                <button onclick="runOCR()" class="btn-neon w-full py-3 text-sm font-bold tracking-widest uppercase">
                    Initialize Scan
                </button>

                <div class="relative">
                    <div id="ocrLoader" class="hidden absolute top-2 right-2 cyber-loader"></div>
                    <textarea id="ocrResult" rows="5" class="input-cyber w-full p-3 text-xs font-mono resize-none" placeholder="// WAITING FOR INPUT..."></textarea>
                </div>
            </div>
        </div>

        <div class="glass-panel p-6 rounded-none relative overflow-hidden group">
            <div class="absolute top-0 left-0 w-1 h-full bg-cyber-purple opacity-50 group-hover:opacity-100 transition"></div>
            <h2 class="text-xl font-bold mb-1 text-white flex items-center gap-2">
                <span class="text-cyber-purple">></span> PDF FUSION
            </h2>
            <p class="text-xs text-gray-500 mb-6 font-bold tracking-widest">MERGE_DOCUMENT_STACK</p>
            
            <div class="space-y-4">
                <div class="h-10"></div> <input type="file" id="pdfInput" accept="application/pdf" multiple class="block w-full text-xs text-gray-400
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-none file:border-0
                  file:text-xs file:font-bold
                  file:bg-cyber-dark file:text-cyber-purple
                  file:border file:border-cyber-purple
                  hover:file:bg-cyber-purple hover:file:text-black cursor-pointer" />

                <button onclick="mergePDFs()" class="btn-neon w-full py-3 text-sm font-bold tracking-widest uppercase" style="border-color: #bc13fe; color: #bc13fe;">
                    Execute Merge
                </button>
                
                <div id="pdfStatus" class="h-20 flex items-center justify-center text-xs text-gray-500 border border-dashed border-gray-800">
                    // SYSTEM IDLE
                </div>
            </div>
        </div>

        <div class="glass-panel p-6 rounded-none relative overflow-hidden group">
            <div class="absolute top-0 left-0 w-1 h-full bg-yellow-400 opacity-50 group-hover:opacity-100 transition"></div>
            <h2 class="text-xl font-bold mb-1 text-white flex items-center gap-2">
                <span class="text-yellow-400">></span> COMPRESSOR
            </h2>
            <p class="text-xs text-gray-500 mb-6 font-bold tracking-widest">REDUCE_FILE_SIZE</p>
            
            <div class="space-y-4">
                <div class="h-10"></div>
                <input type="file" id="compressInput" accept="image/*" class="block w-full text-xs text-gray-400
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-none file:border-0
                  file:text-xs file:font-bold
                  file:bg-cyber-dark file:text-yellow-400
                  file:border file:border-yellow-400
                  hover:file:bg-yellow-400 hover:file:text-black cursor-pointer" />

                <button onclick="compressImage()" class="btn-neon w-full py-3 text-sm font-bold tracking-widest uppercase" style="border-color: #facc15; color: #facc15;">
                    Compress Data
                </button>
                
                <div id="compressStatus" class="h-20 flex items-center justify-center text-xs text-gray-500 border border-dashed border-gray-800">
                    // AWAITING DATA
                </div>
            </div>
        </div>

        <div class="glass-panel p-6 rounded-none relative overflow-hidden group">
            <div class="absolute top-0 left-0 w-1 h-full bg-pink-500 opacity-50 group-hover:opacity-100 transition"></div>
            <h2 class="text-xl font-bold mb-1 text-white flex items-center gap-2">
                <span class="text-pink-500">></span> QR GEN
            </h2>
            <p class="text-xs text-gray-500 mb-6 font-bold tracking-widest">DATA_ENCODING_MATRIX</p>
            
            <input type="text" id="qrText" placeholder="ENTER_URL_OR_TEXT" class="input-cyber w-full mb-4 p-2 text-sm rounded-none" />

            <button onclick="generateQR()" class="btn-neon w-full mb-4 py-2 text-sm font-bold uppercase" style="border-color: #ec4899; color: #ec4899;">
                Generate
            </button>

            <div id="qrPlaceholder" class="flex justify-center items-center p-4 bg-white/10 border border-dashed border-gray-700 h-40">
                <span class="text-xs text-gray-600">// OUTPUT AREA</span>
            </div>
        </div>

        <div class="glass-panel p-6 rounded-none relative overflow-hidden group md:col-span-2">
            <div class="absolute top-0 left-0 w-1 h-full bg-blue-500 opacity-50 group-hover:opacity-100 transition"></div>
            <h2 class="text-xl font-bold mb-1 text-white flex items-center gap-2">
                <span class="text-blue-500">></span> IMG -> PDF
            </h2>
            <p class="text-xs text-gray-500 mb-6 font-bold tracking-widest">FORMAT_CONVERSION_ENGINE</p>
            
            <div class="flex flex-col md:flex-row gap-4 items-end">
                <input type="file" id="imgToPdfInput" accept="image/*" class="block w-full text-xs text-gray-400
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-none file:border-0
                  file:text-xs file:font-bold
                  file:bg-cyber-dark file:text-blue-500
                  file:border file:border-blue-500
                  hover:file:bg-blue-500 hover:file:text-black cursor-pointer" />

                <button onclick="convertImgToPdf()" class="btn-neon w-full md:w-1/3 py-3 text-sm font-bold tracking-widest uppercase" style="border-color: #3b82f6; color: #3b82f6;">
                    Convert
                </button>
            </div>
        </div>

    </div>

    <footer class="mt-20 border-t border-gray-900 bg-cyber-black py-8 text-center">
        <p class="text-xs text-gray-600 font-mono">
            SECURE CONNECTION ESTABLISHED <span class="text-cyber-green">‚óè</span><br>
            NO DATA LEAVES THIS TERMINAL
        </p>
    </footer>

    <script>
        // --- 1. OCR LOGIC ---
        async function runOCR() {
            const file = document.getElementById('ocrInput').files[0];
            const resultArea = document.getElementById('ocrResult');
            const loader = document.getElementById('ocrLoader');
            const lang = document.getElementById('ocrLang').value;
            
            if (!file) return alert(">> ERROR: NO INPUT DETECTED");
            loader.classList.remove('hidden');
            resultArea.value = "// PROCESSING SCANNED DATA...";
            
            try {
                const { data: { text } } = await Tesseract.recognize(file, lang);
                resultArea.value = text;
            } catch (e) { resultArea.value = ">> FATAL ERROR: " + e; } 
            finally { loader.classList.add('hidden'); }
        }

        // --- 2. PDF MERGE LOGIC ---
        async function mergePDFs() {
            const files = document.getElementById('pdfInput').files;
            const status = document.getElementById('pdfStatus');
            const { PDFDocument } = PDFLib;

            if (files.length < 2) return alert(">> ERROR: NEED 2+ FILES");
            status.innerHTML = "<span class='text-cyber-cyan animate-pulse'>// MERGING STACK...</span>";
            
            try {
                const mergedPdf = await PDFDocument.create();
                for (let i = 0; i < files.length; i++) {
                    const arrayBuffer = await files[i].arrayBuffer();
                    const pdf = await PDFDocument.load(arrayBuffer);
                    const pages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                    pages.forEach(p => mergedPdf.addPage(p));
                }
                const blob = new Blob([await mergedPdf.save()], { type: "application/pdf" });
                saveAs(blob, "NEXUS_MERGED.pdf");
                status.innerHTML = "<span class='text-cyber-green'>// DOWNLOAD COMPLETE</span>";
            } catch (e) { status.innerHTML = "<span class='text-red-500'>// ERROR</span>"; }
        }

        // --- 3. COMPRESSOR LOGIC ---
        async function compressImage() {
            const file = document.getElementById('compressInput').files[0];
            const status = document.getElementById('compressStatus');
            if (!file) return alert(">> ERROR: NO IMAGE");

            status.innerHTML = "<span class='text-yellow-400 animate-pulse'>// COMPRESSING...</span>";
            const options = { maxSizeMB: 1, maxWidthOrHeight: 1920, useWebWorker: true };
            
            try {
                const compressedFile = await imageCompression(file, options);
                saveAs(compressedFile, "NEXUS_COMPRESSED_" + file.name);
                status.innerHTML = `<span class='text-cyber-green'>// REDUCED TO ${(compressedFile.size / 1024).toFixed(2)} KB</span>`;
            } catch (error) { status.innerHTML = "ERROR"; }
        }

        // --- 4. QR CODE LOGIC ---
        function generateQR() {
            const text = document.getElementById('qrText').value;
            const container = document.getElementById('qrPlaceholder');
            if (!text) return alert(">> ERROR: INPUT REQUIRED");
            
            container.innerHTML = "";
            // Create a white background for the QR code so it's readable
            const bg = document.createElement('div');
            bg.className = "bg-white p-2";
            container.appendChild(bg);
            
            new QRCode(bg, { text: text, width: 128, height: 128 });
        }

        // --- 5. IMG TO PDF LOGIC ---
        async function convertImgToPdf() {
            const file = document.getElementById('imgToPdfInput').files[0];
            const { PDFDocument } = PDFLib;
            if (!file) return alert(">> ERROR: NO IMAGE");

            const pdfDoc = await PDFDocument.create();
            const page = pdfDoc.addPage();
            const imgBytes = await file.arrayBuffer();
            let image;

            if (file.type === 'image/jpeg') image = await pdfDoc.embedJpg(imgBytes);
            else if (file.type === 'image/png') image = await pdfDoc.embedPng(imgBytes);
            else return alert(">> ERROR: JPG/PNG ONLY");

            const { width, height } = image.scaleToFit(page.getWidth(), page.getHeight());
            page.drawImage(image, { x: 50, y: page.getHeight() - height - 50, width, height });

            const blob = new Blob([await pdfDoc.save()], { type: "application/pdf" });
            saveAs(blob, "NEXUS_CONVERTED.pdf");
        }
    </script>
</body>
</html>
